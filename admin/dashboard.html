<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DroneMart Admin Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css">
   
</head>

<body>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h4>DroneMart Admin</h4>
            <button class="sidebar-toggle" id="sidebarToggle">
                <i class="bi bi-arrow-left-circle"></i>
            </button>
        </div>
        <ul class="sidebar-menu">
            <li>
                <a href="#" class="active">
                    <i class="bi bi-speedometer2"></i>
                    <span class="menu-text">Dashboard</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="bi bi-people"></i>
                    <span class="menu-text">Users</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="bi bi-cart"></i>
                    <span class="menu-text">Orders</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="bi bi-graph-up"></i>
                    <span class="menu-text">Analytics</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="bi bi-gear"></i>
                    <span class="menu-text">Settings</span>
                </a>
            </li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Topbar / Header -->
        <div class="topbar">
            <button class="hamburger" id="hamburger">
                <i class="bi bi-list"></i>
            </button>
            <h2 class="mb-0">Dashboard</h2>
            <div class="profile" id="profileToggle">
                <div class="d-flex align-items-center">
                    <img src="https://ui-avatars.com/api/?name=Super+Admin&background=random" alt="Profile"
                        class="rounded-circle me-2" width="40" height="40">
                    <div class="d-none d-md-block">
                        <div class="fw-bold" id="adminName">Super Admin</div>
                        <small class="text-muted" id="userType">Administrator</small>
                    </div>
                </div>
            </div>

            <!-- Profile Dropdown -->
            <div class="profile-dropdown" id="profileDropdown">
                <div class="dropdown-item">
                    <i class="bi bi-person"></i> Profile
                </div>
                <div class="dropdown-item">
                    <i class="bi bi-gear"></i> Settings
                </div>
                <div class="dropdown-item">
                    <i class="bi bi-bell"></i> Notifications
                </div>
                <hr>
                <div class="dropdown-item" id="logoutBtn">
                    <i class="bi bi-box-arrow-right"></i> Logout
                </div>
            </div>
        </div>

        <!-- Cards Section -->
        <div class="row g-4 mb-4">
            <div class="col-12 col-sm-6 col-lg-3">
                <div class="card dashboard-card text-center p-4 shadow-sm">
                    <i class="bi bi-people-fill card-icon mb-2"></i>
                    <h5>Total Users</h5>
                    <p class="card-text fs-3 fw-bold" id="totalUsers">0</p>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-lg-3">
                <div class="card dashboard-card text-center p-4 shadow-sm">
                    <i class="bi bi-person-plus-fill card-icon mb-2"></i>
                    <h5>New Leads</h5>
                    <p class="card-text fs-3 fw-bold" id="newLeads">0</p>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-lg-3">
                <div class="card dashboard-card text-center p-4 shadow-sm">
                    <i class="bi bi-cart-fill card-icon mb-2"></i>
                    <h5>Orders</h5>
                    <p class="card-text fs-3 fw-bold" id="newOrders">0</p>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-lg-3">
                <div class="card dashboard-card text-center p-4 shadow-sm">
                    <i class="bi bi-currency-dollar card-icon mb-2"></i>
                    <h5>Revenue</h5>
                    <p class="card-text fs-3 fw-bold" id="revenue">$0</p>
                </div>
            </div>
        </div>

        <!-- Users Table -->
        <div class="card shadow-sm">
            <div class="card-header bg-white border-0">
                <h4 class="my-2">Recent Users / Leads</h4>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                <table class="table table-hover" id="usersTable">
                    <thead class="table-primary">
                        <tr>
                            <th>Sr No</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Mobile</th>
                            <th>Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            </div>
        </div>
    </div>
    <script src="assets/js/dashboard.js"></script>

    <script>
        // UI Interaction JavaScript
        document.addEventListener('DOMContentLoaded', function () {
            // Set admin info from localStorage
            const adminName = localStorage.getItem('adminName') || 'Admin';
            const userType = localStorage.getItem('userType') || 'Administrator';

            document.getElementById('adminName').textContent = adminName;
            document.getElementById('userType').textContent = userType;

            // Toggle sidebar
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            const sidebarToggle = document.getElementById('sidebarToggle');
            const hamburger = document.getElementById('hamburger');

            sidebarToggle.addEventListener('click', function () {
                sidebar.classList.toggle('collapsed');
                mainContent.classList.toggle('expanded');

                // Change icon based on state
                const icon = sidebarToggle.querySelector('i');
                if (sidebar.classList.contains('collapsed')) {
                    icon.classList.remove('bi-arrow-left-circle');
                    icon.classList.add('bi-arrow-right-circle');
                } else {
                    icon.classList.remove('bi-arrow-right-circle');
                    icon.classList.add('bi-arrow-left-circle');
                }
            });

            // Mobile hamburger menu
            hamburger.addEventListener('click', function () {
                sidebar.classList.toggle('active');
            });

            // Profile dropdown toggle
            const profileToggle = document.getElementById('profileToggle');
            const profileDropdown = document.getElementById('profileDropdown');

            profileToggle.addEventListener('click', function (e) {
                e.stopPropagation();
                profileDropdown.classList.toggle('active');
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', function (e) {
                if (!profileToggle.contains(e.target) && !profileDropdown.contains(e.target)) {
                    profileDropdown.classList.remove('active');
                }
            });

            // Logout functionality
            const logoutBtn = document.getElementById('logoutBtn');
            logoutBtn.addEventListener('click', function () {
                if (confirm('Are you sure you want to logout?')) {
                    localStorage.removeItem('adminToken');
                    localStorage.removeItem('userType');
                    localStorage.removeItem('adminName');
                    window.location.href = '/admin';
                }
            });

            // Auto-adjust for mobile on load
            function checkWidth() {
                if (window.innerWidth <= 992) {
                    sidebar.classList.remove('collapsed');
                    sidebar.classList.remove('active');
                    mainContent.classList.remove('expanded');
                } else {
                    sidebar.classList.add('collapsed');
                    mainContent.classList.add('expanded');
                }
            }

            // Check on load and resize
            checkWidth();
            window.addEventListener('resize', checkWidth);

            // Load dashboard stats
            loadDashboardStats();
        });


    </script>
</body>

</html>